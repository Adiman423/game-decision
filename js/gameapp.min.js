var timeInMs=Date.now(),igdb_api="https://igdbcom-internet-game-database-v1.p.mashape.com/games/";if(igdb_api+="?filter%5Brelease_dates.platform%5D%5Beq%5D=6",igdb_api+="&fields=name%2crating%2caggregated_rating%2crelease_dates%2curl%2calternative_names%2ccover.cloudinary_id&limit=10&offset=0%3Adesc&search=",navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(msViewportStyle)}var gameSearchApp=angular.module("gameJudgement",[]);gameSearchApp.controller("gameSearchCtrl",["$http","$scope",function($http,$scope){var searchctrl=this;searchctrl.rightNow=timeInMs,searchctrl.games=[],searchctrl.steamList=[],searchctrl.altNameChecker=function(){for(var counter=0,i=0;i<searchctrl.steamList.length;i++)for(var j=0;j<searchctrl.games.length;j++)if(null!=searchctrl.games[j].alternative_names)for(var k=0;k<searchctrl.games[j].alternative_names.length;k++)searchctrl.games[j].alternative_names[k].name==searchctrl.steamList[i].name&&counter++;return counter},searchctrl.gameNameCleaner=function(){for(var i=0;i<searchctrl.steamList.length;i++)for(var j=0;j<searchctrl.games.length;j++)searchctrl.games[j].name.toLowerCase()==searchctrl.steamList[i].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.games[j].name.toLowerCase()==searchctrl.steamList[i].name.trim().toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.games[j].name.replace(": "," ").toLowerCase()===searchctrl.steamList[i].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.games[j].name.replace(": "," - ").toLowerCase()===searchctrl.steamList[i].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.games[j].name.replace("and","&")==searchctrl.steamList[i].name?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("_"," ")===searchctrl.games[j].name&&0==searchctrl.altNameChecker()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("®","").replace("™","").toLowerCase()==searchctrl.games[j].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("®","").toLowerCase()==searchctrl.games[j].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("™","").toLowerCase()==searchctrl.games[j].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("™","").toLowerCase().trim()==searchctrl.games[j].name.toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.steamList[i].name.replace("™","").toLowerCase()==searchctrl.games[j].name.replace(": "," ").toLowerCase()?searchctrl.games[j].name=searchctrl.steamList[i].name:searchctrl.games[j].name.toUpperCase()==searchctrl.steamList[i].name&&(searchctrl.games[j].name=searchctrl.steamList[i].name)},$http.get("/steamList.json").success(function(data,status,headers,config){searchctrl.steamList=data,searchctrl.gameNameCleaner()}),searchctrl.clickCounter=0,$scope.search=function(game){searchctrl.clickCounter++,game=document.getElementById("game").value,$scope.target||($scope.target=75),igdb_api+=document.getElementById("game").value,$http.get(igdb_api,{headers:{"X-Mashape-Key":"MY_IGDB_API_KEY",Accept:"application/json"}}).success(function(data,status,headers,config){searchctrl.games=data,searchctrl.gameNameCleaner()})}}]);